<svg viewBox="0 0 1400 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1400" height="800" fill="#f8fafc"/>
  
  <!-- Title -->
  <text x="700" y="30" text-anchor="middle" font-size="22" font-weight="bold" fill="#1f2937">
    GitHub訪問数集計システム構成図
  </text>
  <text x="700" y="52" text-anchor="middle" font-size="16" fill="#6b7280">
    (Xserver + Laravel)
  </text>
  
  <!-- GitHub Section -->
  <g id="github-section">
    <rect x="50" y="80" width="200" height="120" rx="10" fill="#24292e" stroke="#6b7280" stroke-width="2"/>
    <text x="150" y="105" text-anchor="middle" font-size="16" font-weight="bold" fill="white">GitHub</text>
    <text x="150" y="130" text-anchor="middle" font-size="12" fill="#e5e7eb">Multiple Repositories</text>
    <text x="150" y="150" text-anchor="middle" font-size="12" fill="#e5e7eb">Traffic API</text>
    <text x="150" y="170" text-anchor="middle" font-size="10" fill="#9ca3af">訪問数データ提供</text>
  </g>
  
  <!-- Xserver Section -->
  <g id="xserver-section">
    <rect x="350" y="60" width="400" height="320" rx="10" fill="#3b82f6" stroke="#1d4ed8" stroke-width="3"/>
    <text x="550" y="85" text-anchor="middle" font-size="18" font-weight="bold" fill="white">Xserver</text>
    
    <!-- Laravel App -->
    <rect x="370" y="100" width="360" height="240" rx="8" fill="white" stroke="#e5e7eb" stroke-width="2"/>
    <text x="550" y="125" text-anchor="middle" font-size="16" font-weight="bold" fill="#dc2626">Laravel Application</text>
    
    <!-- Artisan Commands -->
    <rect x="380" y="140" width="110" height="80" rx="5" fill="#f3f4f6" stroke="#d1d5db"/>
    <text x="435" y="160" text-anchor="middle" font-size="11" font-weight="bold" fill="#374151">Artisan Commands</text>
    <text x="435" y="175" text-anchor="middle" font-size="9" fill="#6b7280">github:fetch-views</text>
    <text x="435" y="190" text-anchor="middle" font-size="8" fill="#6b7280">FillMissingGitHubViews</text>
    <text x="435" y="205" text-anchor="middle" font-size="8" fill="#6b7280">MigrateExistingGitHubViews</text>
    
    <!-- Task Scheduler -->
    <rect x="510" y="140" width="110" height="60" rx="5" fill="#f3f4f6" stroke="#d1d5db"/>
    <text x="565" y="160" text-anchor="middle" font-size="11" font-weight="bold" fill="#374151">Task Scheduler</text>
    <text x="565" y="175" text-anchor="middle" font-size="9" fill="#6b7280">dailyAt('02:00')</text>
    <text x="565" y="190" text-anchor="middle" font-size="9" fill="#6b7280">スケジュール管理</text>
    
    <!-- Web Interface -->
    <rect x="380" y="240" width="110" height="60" rx="5" fill="#f3f4f6" stroke="#d1d5db"/>
    <text x="435" y="260" text-anchor="middle" font-size="11" font-weight="bold" fill="#374151">Web Interface</text>
    <text x="435" y="275" text-anchor="middle" font-size="9" fill="#6b7280">データ表示</text>
    <text x="435" y="290" text-anchor="middle" font-size="9" fill="#6b7280">グラフ・チャート</text>
    
    <!-- API Routes -->
    <rect x="510" y="240" width="110" height="60" rx="5" fill="#f3f4f6" stroke="#d1d5db"/>
    <text x="565" y="260" text-anchor="middle" font-size="11" font-weight="bold" fill="#374151">API Routes</text>
    <text x="565" y="275" text-anchor="middle" font-size="9" fill="#6b7280">JSON API</text>
    <text x="565" y="290" text-anchor="middle" font-size="9" fill="#6b7280">外部連携</text>
    
    <!-- Livewire Components -->
    <rect x="640" y="140" width="110" height="80" rx="5" fill="#f3f4f6" stroke="#d1d5db"/>
    <text x="695" y="160" text-anchor="middle" font-size="11" font-weight="bold" fill="#374151">Livewire</text>
    <text x="695" y="175" text-anchor="middle" font-size="9" fill="#6b7280">Components</text>
    <text x="695" y="190" text-anchor="middle" font-size="9" fill="#6b7280">リアルタイム更新</text>
    <text x="695" y="205" text-anchor="middle" font-size="9" fill="#6b7280">インタラクティブUI</text>
    
    <!-- Authentication -->
    <rect x="640" y="240" width="110" height="60" rx="5" fill="#f3f4f6" stroke="#d1d5db"/>
    <text x="695" y="260" text-anchor="middle" font-size="11" font-weight="bold" fill="#374151">Authentication</text>
    <text x="695" y="275" text-anchor="middle" font-size="9" fill="#6b7280">ログイン機能</text>
    <text x="695" y="290" text-anchor="middle" font-size="9" fill="#6b7280">管理画面</text>
    
    <!-- Cron -->
    <rect x="370" y="350" width="360" height="40" rx="5" fill="#059669" stroke="#047857"/>
    <text x="550" y="365" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Cron Job</text>
    <text x="550" y="380" text-anchor="middle" font-size="10" fill="#d1fae5">0 2 * * * php artisan schedule:run</text>
  </g>
  
  <!-- MySQL Database -->
  <g id="database-section">
    <rect x="850" y="80" width="320" height="160" rx="10" fill="#f59e0b" stroke="#d97706" stroke-width="2"/>
    <text x="1010" y="105" text-anchor="middle" font-size="16" font-weight="bold" fill="white">MySQL Database</text>
    
    <!-- github_views table -->
    <rect x="860" y="120" width="140" height="80" rx="5" fill="#fef3c7" stroke="#f59e0b"/>
    <text x="930" y="140" text-anchor="middle" font-size="11" font-weight="bold" fill="#92400e">github_views</text>
    <text x="870" y="155" font-size="8" fill="#92400e">• id, repository_id</text>
    <text x="870" y="170" font-size="8" fill="#92400e">• project, date</text>
    <text x="870" y="185" font-size="8" fill="#92400e">• count, uniques</text>
    <text x="870" y="200" font-size="8" fill="#92400e">• timestamps</text>
    
    <!-- github_repositories table -->
    <rect x="1020" y="120" width="140" height="80" rx="5" fill="#fef3c7" stroke="#f59e0b"/>
    <text x="1090" y="140" text-anchor="middle" font-size="11" font-weight="bold" fill="#92400e">github_repositories</text>
    <text x="1030" y="155" font-size="8" fill="#92400e">• id, owner, repo</text>
    <text x="1030" y="170" font-size="8" fill="#92400e">• name, description</text>
    <text x="1030" y="185" font-size="8" fill="#92400e">• is_active, token</text>
    <text x="1030" y="200" font-size="8" fill="#92400e">• timestamps</text>
  </g>
  
  <!-- User/Browser -->
  <g id="user-section">
    <rect x="450" y="500" width="200" height="100" rx="10" fill="#8b5cf6" stroke="#7c3aed" stroke-width="2"/>
    <text x="550" y="525" text-anchor="middle" font-size="16" font-weight="bold" fill="white">User/Browser</text>
    <text x="550" y="545" text-anchor="middle" font-size="12" fill="#e9d5ff">Web Interface</text>
    <text x="550" y="565" text-anchor="middle" font-size="12" fill="#e9d5ff">データ閲覧・分析</text>
    <text x="550" y="585" text-anchor="middle" font-size="12" fill="#e9d5ff">管理画面</text>
  </g>
  
  <!-- Data Flow Arrows -->
  
  <!-- GitHub to Laravel -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
     refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151" />
    </marker>
  </defs>
  
  <!-- GitHub API call -->
  <path d="M 250 140 Q 300 120 350 160" stroke="#374151" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Laravel to Database -->
  <path d="M 750 180 Q 800 160 850 140" stroke="#374151" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Database to Laravel -->
  <path d="M 850 200 Q 800 220 750 240" stroke="#374151" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Laravel to User -->
  <path d="M 550 380 Q 550 450 550 500" stroke="#374151" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow Labels with high z-index -->
  <g style="z-index: 1000;">
    <!-- GitHub API call label -->
    <rect x="290" y="110" width="70" height="40" rx="5" fill="white" stroke="#374151" stroke-width="1" opacity="0.9"/>
    <text x="325" y="125" text-anchor="middle" font-size="9" fill="#374151" font-weight="bold">
      API Request
    </text>
    <text x="325" y="140" text-anchor="middle" font-size="8" fill="#6b7280">
      Personal Access
    </text>
    <text x="325" y="152" text-anchor="middle" font-size="8" fill="#6b7280">
      Token
    </text>
    
    <!-- Store Data label -->
    <rect x="770" y="140" width="60" height="25" rx="5" fill="white" stroke="#374151" stroke-width="1" opacity="0.9"/>
    <text x="800" y="155" text-anchor="middle" font-size="8" fill="#374151" font-weight="bold">
      Store Data
    </text>
    
    <!-- Retrieve Data label -->
    <rect x="770" y="200" width="60" height="25" rx="5" fill="white" stroke="#374151" stroke-width="1" opacity="0.9"/>
    <text x="800" y="215" text-anchor="middle" font-size="8" fill="#374151" font-weight="bold">
      Retrieve Data
    </text>
    
    <!-- Web Response label -->
    <rect x="515" y="415" width="70" height="30" rx="5" fill="white" stroke="#374151" stroke-width="1" opacity="0.9"/>
    <text x="550" y="430" text-anchor="middle" font-size="9" fill="#374151" font-weight="bold">
      Web Response
    </text>
  </g>
  
  <!-- Process Flow Steps -->
  <g id="process-steps">
    <text x="50" y="650" font-size="14" font-weight="bold" fill="#1f2937">処理フロー:</text>
    <text x="70" y="670" font-size="11" fill="#374151">1. Cronが毎日午前2時にLaravelスケジューラーを実行</text>
    <text x="70" y="685" font-size="11" fill="#374151">2. ArtisanコマンドがGitHub APIから訪問数データを取得（複数リポジトリ対応）</text>
    
    <text x="700" y="670" font-size="11" fill="#374151">3. 取得したデータをMySQLに保存（リポジトリIDで関連付け）</text>
    <text x="700" y="685" font-size="11" fill="#374151">4. Webインターフェースでユーザーがデータを閲覧・分析・管理</text>
  </g>
  
  <!-- Technology Stack -->
  <g id="tech-stack">
    <rect x="50" y="400" width="300" height="200" rx="10" fill="#f9fafb" stroke="#e5e7eb" stroke-width="2"/>
    <text x="200" y="425" text-anchor="middle" font-size="16" font-weight="bold" fill="#1f2937">使用技術</text>
    
    <text x="70" y="450" font-size="12" fill="#374151">• <tspan font-weight="bold">サーバー:</tspan> Xserver (共有ホスティング)</text>
    <text x="70" y="470" font-size="12" fill="#374151">• <tspan font-weight="bold">フレームワーク:</tspan> Laravel (PHP)</text>
    <text x="70" y="490" font-size="12" fill="#374151">• <tspan font-weight="bold">データベース:</tspan> MySQL</text>
    <text x="70" y="510" font-size="12" fill="#374151">• <tspan font-weight="bold">スケジューラー:</tspan> Cron + Laravel Task Scheduler</text>
    <text x="70" y="530" font-size="12" fill="#374151">• <tspan font-weight="bold">API:</tspan> GitHub Traffic API</text>
    <text x="70" y="550" font-size="12" fill="#374151">• <tspan font-weight="bold">認証:</tspan> Personal Access Token</text>
    <text x="70" y="570" font-size="12" fill="#374151">• <tspan font-weight="bold">UI:</tspan> Livewire + Blade</text>
    <text x="70" y="590" font-size="12" fill="#374151">• <tspan font-weight="bold">管理機能:</tspan> 認証付き管理画面</text>
  </g>
  
  <!-- Benefits -->
  <g id="benefits">
    <rect x="820" y="400" width="530" height="200" rx="10" fill="#f0f9ff" stroke="#0ea5e9" stroke-width="2"/>
    <text x="1085" y="425" text-anchor="middle" font-size="16" font-weight="bold" fill="#1f2937">システムの特徴</text>
    
    <text x="840" y="450" font-size="11" fill="#374151">• <tspan font-weight="bold">複数リポジトリ対応:</tspan> 複数のGitHubリポジトリを一元管理</text>
    <text x="840" y="470" font-size="11" fill="#374151">• <tspan font-weight="bold">自動化:</tspan> 毎日自動でデータ収集</text>
    <text x="840" y="490" font-size="11" fill="#374151">• <tspan font-weight="bold">重複回避:</tspan> 同じ日付のデータは更新</text>
    <text x="840" y="510" font-size="11" fill="#374151">• <tspan font-weight="bold">長期保存:</tspan> GitHub APIの2週間制限を回避</text>
    <text x="840" y="530" font-size="11" fill="#374151">• <tspan font-weight="bold">可視化:</tspan> Web UIでデータ閲覧・分析</text>
    <text x="840" y="550" font-size="11" fill="#374151">• <tspan font-weight="bold">管理機能:</tspan> 認証付き管理画面でリポジトリ管理</text>
    <text x="840" y="570" font-size="11" fill="#374151">• <tspan font-weight="bold">リアルタイム更新:</tspan> Livewireによる動的UI</text>
    <text x="840" y="590" font-size="11" fill="#374151">• <tspan font-weight="bold">コスト効率:</tspan> 共有ホスティングで運用</text>
  </g>
  
</svg>